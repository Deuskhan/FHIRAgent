# FHIR Agent Admin Panel

This web-based admin panel centralizes tracking of FHIR agents installed on primary care physicians' computers. The panel allows an administrator to:

- **Dashboard**: View a list of installed agents along with connection status, last sync time, and aggregated statistics.
- **Configuration**: Set up or modify the SMART on FHIR connection settings for each agent.
- **Logs**: View error and operational logs generated by the agents, with filtering options.

## Project Structure

- **Controllers**:
  - `DashboardController.cs`: Retrieves agent data and summary statistics.
  - `ConfigurationController.cs`: Manages FHIR server connection settings.
  - `LogController.cs`: Displays error and operational logs.
  
- **Models**:
  - `Agent.cs`: Represents an installed agent.
  - `FhirConfiguration.cs`: Stores SMART on FHIR configuration parameters.
  - `LogEntry.cs`: Represents a log record.
  
- **Data**:
  - `ApplicationDbContext.cs`: EF Core context for agents, configurations, and logs.
  
- **Views**:
  - **Dashboard**: `Dashboard/Index.cshtml`
  - **Configuration**: `Configuration/Index.cshtml` and `Configuration/Edit.cshtml`
  - **Logs**: `Logs/Index.cshtml`
  
- **Static Files**:
  - Located in `wwwroot/` and styled using Bootstrap 5.
  
- **Configuration Files**:
  - `appsettings.json`: Contains connection strings, FHIR test endpoint, and logging settings.
  - `.cursorrules`: Contains key documentation links and context rules.
  
- **Program.cs**: Entry point for the ASP.NET Core application.

## Setup Instructions

1. Ensure you have the .NET 7 SDK installed.
2. Adjust the connection string in `appsettings.json` if necessary.
3. Build and run the project:
   ```powershell
   dotnet build
   dotnet run
   ```
4. Access the admin panel via the configured URL (by default, https://localhost:5001).

## Future Enhancements

- Integrate actual SMART on FHIR logic using the Firely .NET SDK.
- Implement authentication and authorization (e.g., using ASP.NET Core Identity).
- Expand the logging features and add role-based access control.
- Document the SMART on FHIR configuration process in detail on the Configuration page.

## References

- [Firely .NET SDK Documentation](https://docs.fire.ly/)
- [SMART on FHIR Specification](https://smarthealthit.org/)
- [HL7 FHIR R4 Specification](https://hl7.org/fhir/R4/index.html)
- [Athenahealth Developer Documentation](https://developer.athenahealth.com/)
- [HAPI FHIR Public Test Server](http://hapi.fhir.org/baseR4) 